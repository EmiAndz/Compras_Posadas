<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ficha de Producto</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="assets/css/styles.css" />
  
  <!-- AOS (Animate On Scroll) Plugin -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <style>
    .producto-ficha {
      max-width: 1200px;
      margin: 48px auto;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 2px 16px rgba(44,164,93,0.10);
      padding: 32px;
    }
    
    .producto-layout {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 48px;
      align-items: start;
    }
    
    @media (max-width: 768px) {
      .producto-layout {
        grid-template-columns: 1fr;
        gap: 24px;
      }
    }
    
    /* Columna izquierda - Galer√≠a */
    .producto-galeria {
      display: flex;
      flex-direction: column;
    }
    
    .producto-img {
      width: 100%;
      max-width: 500px;
      height: auto;
      aspect-ratio: 1;
      object-fit: cover;
      border-radius: 14px;
      margin-bottom: 16px;
      background: #e6f6ee;
    }
    
    .producto-thumbnails {
      display: flex;
      gap: 8px;
      justify-content: center;
    }
    
    .thumbnail {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 8px;
      cursor: pointer;
      border: 2px solid transparent;
    }
    
    .thumbnail.active {
      border-color: #228b49;
    }
    
    /* Columna derecha - Informaci√≥n */
    .producto-info {
      display: flex;
      flex-direction: column;
    }
    
    .producto-nombre {
      font-size: 2.25rem;
      font-weight: 700;
      color: #228b49;
      margin-bottom: 16px;
      line-height: 1.2;
    }
    
    .producto-descripcion {
      font-size: 1.1rem;
      color: #555;
      margin-bottom: 24px;
      line-height: 1.6;
    }
    
    .producto-ficha-tecnica {
      background: #f8fffe;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 24px;
      border-left: 4px solid #228b49;
    }
    
    .ficha-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid #e2e8f0;
    }
    
    .ficha-item:last-child {
      border-bottom: none;
    }
    
    .ficha-label {
      font-weight: 600;
      color: #374151;
      font-size: 0.95rem;
    }
    
    .ficha-value {
      color: #228b49;
      font-weight: 500;
      text-align: right;
      font-size: 0.95rem;
    }
    
    .producto-precios {
      margin-bottom: 24px;
    }
    
    .producto-precio-original {
      font-size: 1.1rem;
      color: #999;
      text-decoration: line-through;
      margin-bottom: 8px;
      text-align: left;
    }
    
    .producto-precio-principal {
      font-size: 3rem;
      font-weight: 700;
      color: #dc2626;
      margin-bottom: 16px;
      line-height: 1;
    }
    
    .precios-adicionales {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 16px;
    }
    
    .precio-badge {
      background: #f1f5f9;
      color: #475569;
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 500;
      border: 1px solid #e2e8f0;
    }
    
    .precio-nota {
      font-size: 0.85rem;
      color: #6b7280;
      font-style: italic;
      margin-bottom: 16px;
    }
    
    .producto-fav-btn {
      background: rgba(239, 68, 68, 0.1);
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      padding: 12px 24px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 8px;
      color: #6b7280;
      align-self: flex-start;
      margin-bottom: 16px;
    }
    
    .producto-fav-btn:hover {
      border-color: #ef4444;
      color: #ef4444;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2);
    }
    
    .producto-fav-btn.active {
      background: #ef4444;
      border-color: #ef4444;
      color: white;
    }
    
    .producto-fav-btn.active:hover {
      background: #dc2626;
      border-color: #dc2626;
    }
  </style>
</head>
<body>
  <!-- Topbar -->
  <header class="topbar" data-aos="fade-down" data-aos-duration="800">
    <div class="topbar__wrap">
      <a class="brand" href="index.html" data-aos="fade-right" data-aos-delay="200">
        <span class="logo-icon"></span>
        <span class="brand__name"><strong>Compras</strong> Posadas</span>
      </a>
      <form class="search" role="search" aria-label="Buscar productos" id="searchForm">
        <div class="search__container">
          <div class="search__input-wrapper">
            <input 
              type="search" 
              placeholder="Buscar por producto, categor√≠a, tienda" 
              aria-label="Buscar producto"
              id="searchInput"
              autocomplete="off"
            />
            <button type="button" class="search__clear-btn" id="clearSearchBtn" aria-label="Limpiar b√∫squeda" style="display: none;">
              <span>√ó</span>
            </button>
            <button type="submit" class="btn-icon" aria-label="Buscar">
              <svg width="20" height="20" viewBox="0 0 22 22" fill="none">
                <circle cx="10" cy="10" r="8" stroke="#fff" stroke-width="2"/>
                <line x1="16" y1="16" x2="21" y2="21" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
          </div>
          
          <!-- Dropdown de sugerencias debajo del input -->
          <div class="search__dropdown" id="searchDropdown" style="display: none;">
            <div class="search__suggestion-item" id="searchSuggestion">
              <span class="search__suggestion-text" id="suggestionText"></span>
              <div class="search__loading" id="searchLoading" style="display: none;">
                <div class="search__spinner"></div>
              </div>
            </div>
          </div>
        </div>
      </form>
      <nav class="actions" data-aos="fade-left" data-aos-delay="400">
        <button id="btnWishlist" class="action-btn wishlist-btn" aria-haspopup="true" aria-controls="wishlistDrawer" aria-expanded="false">
          <span class="icon-heart" aria-hidden="true">‚ô•</span>
          Lista deseos
          <span id="wlCount" class="badge">0</span>
        </button>
        <button type="button" class="action-btn" id="btnLogin">Iniciar sesi√≥n</button>
      </nav>
    </div>
  </header>

  <!-- Barra de navegaci√≥n superior (Desktop) -->
  <nav class="desktop-nav" aria-label="Navegaci√≥n principal desktop" data-aos="fade-down" data-aos-delay="600">
    <div class="desktop-nav__wrap">
      <a href="index.html" class="desktop-nav__item" data-aos="zoom-in" data-aos-delay="700">
        <svg class="desktop-nav__icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Home</span>
      </a>
      
      <a href="tiendas.html" class="desktop-nav__item" data-aos="zoom-in" data-aos-delay="750">
        <svg class="desktop-nav__icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M21 20C21 18.9391 20.5786 17.9217 19.8284 17.1716C19.0783 16.4214 18.0609 16 17 16H9C7.93913 16 6.92172 16.4214 6.17157 17.1716C5.42143 17.9217 5 18.9391 5 20M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M19 21V19C19 18.1974 18.7205 17.4204 18.2207 16.8056C17.7209 16.1908 17.0332 15.7759 16.26 15.64M15 3.13C15.7739 3.26531 16.4622 3.68167 16.9629 4.29790C17.4636 4.91413 17.7436 5.69240 17.7436 6.49635C17.7436 7.30030 17.4636 8.07857 16.9629 8.69480C16.4622 9.31103 15.7739 9.72739 15 9.86270" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Tiendas</span>
      </a>
      
      <a href="ubicaciones.html" class="desktop-nav__item" data-aos="zoom-in" data-aos-delay="800">
        <svg class="desktop-nav__icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M21 10C21 17 12 23 12 23S3 17 3 10C3 7.61305 3.94821 5.32387 5.63604 3.63604C7.32387 1.94821 9.61305 1 12 1C14.3869 1 16.6761 1.94821 18.3639 3.63604C20.0518 5.32387 21 7.61305 21 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="2"/>
        </svg>
        <span>Ubicaciones</span>
      </a>
    </div>
  </nav>

  <!-- Bot√≥n de men√∫ m√≥vil -->
  <button class="mobile-menu-btn" aria-label="Abrir men√∫ de categor√≠as" aria-expanded="false" data-aos="fade-up" data-aos-delay="500">
    <span class="mobile-menu-btn__icon">‚ò∞</span>
    <span class="mobile-menu-btn__text">Categor√≠as</span>
  </button>

  <div class="container layout">
    <!-- Sidebar de categor√≠as -->
    <aside class="sidebar" id="sidebar" data-aos="slide-right" data-aos-duration="800">
      <div class="sidebar__header" data-aos="fade-down" data-aos-delay="200">
        <h2 class="sidebar__title">Categor√≠as</h2>
        <button class="sidebar__close" aria-label="Cerrar men√∫">‚úï</button>
      </div>
      <nav class="sidebar__nav">
        <a href="listado_box.html?categoria=celulares" data-aos="fade-right" data-aos-delay="300"><span>üì±</span> Celulares</a>
        <a href="listado_box.html?categoria=electronica" data-aos="fade-right" data-aos-delay="350"><span>üñ•Ô∏è</span> Electr√≥nica</a>
        <a href="listado_box.html?categoria=cosmetica" data-aos="fade-right" data-aos-delay="400"><span>üíÑ</span> Cosmetica</a>
        <a href="listado_box.html?categoria=informatica" data-aos="fade-right" data-aos-delay="450"><span>üíª</span> Inform√°tica</a>
        <a href="listado_box.html?categoria=camping" data-aos="fade-right" data-aos-delay="500"><span>üèïÔ∏è</span> Camping</a>
        <a href="listado_box.html?categoria=apple" data-aos="fade-right" data-aos-delay="550"><span>üçè</span> Apple</a>
        <a href="listado_box.html?categoria=indumentaria" data-aos="fade-right" data-aos-delay="600"><span>üëï</span> Indumentaria</a>
        <a href="listado_box.html?categoria=calzado" data-aos="fade-right" data-aos-delay="650"><span>üëü</span> Calzado</a>
        <a href="listado_box.html?categoria=ofertas" data-aos="fade-right" data-aos-delay="700"><span>üè∑Ô∏è</span> Ofertas y descuentos</a>
        <a href="listado_box.html?categoria=todas" data-aos="fade-right" data-aos-delay="750"><span>üóÇÔ∏è</span> Todas las categor√≠as</a>
      </nav>
    </aside>

    <!-- √Årea principal -->
    <main class="main">
      <!-- Bot√≥n de volver -->
      <div class="mb-6" data-aos="fade-right" data-aos-duration="600">
        <button onclick="history.back()" class="flex items-center text-emerald-600 hover:text-emerald-800 transition-colors duration-200">
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
          </svg>
          Volver
        </button>
      </div>

      <section class="producto-ficha" data-aos="fade-up" data-aos-duration="800">
    <!-- Loading state -->
    <div id="loading" class="text-center py-8">
      <div class="spinner" style="border: 4px solid #f3f3f3; border-top: 4px solid #228b49; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
      <p>Cargando producto...</p>
    </div>
    
    <!-- Product content -->
    <div id="product-content" style="display: none;">
      <div class="producto-layout">
        <!-- Columna izquierda - Galer√≠a -->
        <div class="producto-galeria">
          <img id="producto-img" src="" alt="" class="producto-img" />
          <div class="producto-thumbnails" id="thumbnails" style="display: none;">
            <!-- Las miniaturas se generar√°n din√°micamente si hay m√°s im√°genes -->
          </div>
        </div>
        
        <!-- Columna derecha - Informaci√≥n -->
        <div class="producto-info">
          <h1 id="producto-nombre" class="producto-nombre"></h1>
          <p id="producto-descripcion" class="producto-descripcion"></p>
          
          <!-- Ficha t√©cnica -->
          <div class="producto-ficha-tecnica">
            <div class="ficha-item">
              <span class="ficha-label">Disponibilidad:</span>
              <span id="ficha-stock" class="ficha-value"></span>
            </div>
            <div class="ficha-item">
              <span class="ficha-label">C√≥digo del producto:</span>
              <span id="ficha-codigo" class="ficha-value"></span>
            </div>
            <div class="ficha-item">
              <span class="ficha-label">Categor√≠a:</span>
              <span id="ficha-categoria" class="ficha-value"></span>
            </div>
            <div class="ficha-item" id="ficha-marca-container" style="display: none;">
              <span class="ficha-label">Marca:</span>
              <span id="ficha-marca" class="ficha-value"></span>
            </div>
            <div class="ficha-item">
              <span class="ficha-label">Tienda:</span>
              <span id="ficha-tienda" class="ficha-value"></span>
            </div>
          </div>
          
          <!-- Bloque de precios -->
          <div class="producto-precios">
            <div id="producto-precio-original" class="producto-precio-original" style="display: none;"></div>
            <div id="producto-precio-principal" class="producto-precio-principal"></div>
            <div class="precios-adicionales" id="precios-adicionales" style="display: none;">
              <!-- Otros precios se mostrar√°n aqu√≠ si existen -->
            </div>
            <div class="precio-nota" style="display: none;">*Precios no incluyen IVA</div>
          </div>
          
          <!-- Bot√≥n de favoritos -->
          <button id="producto-fav-btn" class="producto-fav-btn fav-btn" data-product-id="" title="Agregar a favoritos">
            <span class="fav-icon">‚ô•</span>
            <span id="fav-text">Agregar a favoritos</span>
          </button>
        </div>
      </div>
      
      <!-- Especificaciones t√©cnicas (si existen) -->
      <div id="producto-detalles" class="producto-detalles" style="display: none; margin-top: 32px;">
        <h3>Especificaciones t√©cnicas detalladas</h3>
        <ul id="specs-list"></ul>
      </div>
    </div>
  </section>

  <style>
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>

  <!-- Scripts -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="assets/js/config/supabase.js"></script>
  <script src="assets/js/services/simpleServices.js"></script>
  
  <script>
    // Funci√≥n para formatear precios en pesos argentinos
    const formatARS = (precio) => {
      if (!precio || precio === 0) return 'Consultar precio';
      const valor = Number(precio);
      return new Intl.NumberFormat('es-AR', {
        style: 'currency',
        currency: 'ARS',
        minimumFractionDigits: 0,
        maximumFractionDigits: 0,
      }).format(valor);
    };

    // Obtener ID del producto de la URL
    function getProductIdFromURL() {
      const params = new URLSearchParams(window.location.search);
      return params.get('id');
    }

    // Cargar datos del producto
    async function loadProduct() {
      const productId = getProductIdFromURL();
      
      if (!productId) {
        console.error('‚ùå No se proporcion√≥ ID de producto en la URL');
        return;
      }

      try {
        console.log('üì¶ Cargando producto:', productId);
        
        // Asegurar que Supabase est√© inicializado
        if (typeof window.supabaseClient === 'undefined') {
          await new Promise(resolve => {
            const checkInterval = setInterval(() => {
              if (typeof window.supabaseClient !== 'undefined') {
                clearInterval(checkInterval);
                resolve();
              }
            }, 100);
          });
        }

        // Obtener el producto desde Supabase
        const result = await SimpleSupabaseService.getProductById(productId);
        
        console.log('üîç Resultado de b√∫squeda:', result);
        
        if (result.success && result.data) {
          console.log('‚úÖ Producto cargado:', result.data);
          displayProduct(result.data);
        } else {
          console.error('‚ùå Error:', result.error || 'Producto no encontrado');
        }
        
      } catch (error) {
        console.error('‚ùå Error cargando producto:', error);
      }
    }

    // Mostrar los datos del producto
    function displayProduct(product) {
      document.getElementById('loading').style.display = 'none';
      document.getElementById('product-content').style.display = 'block';
      
      // Datos b√°sicos
      const imagenUrl = product.imagen || 'img/products/default.jpg';
      document.getElementById('producto-img').src = imagenUrl;
      document.getElementById('producto-img').alt = product.nombre;
      
      // Manejar error de carga de imagen
      document.getElementById('producto-img').onerror = function() {
        this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYwIiBoZWlnaHQ9IjI2MCIgdmlld0JveD0iMCAwIDI2MCAyNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyNjAiIGhlaWdodD0iMjYwIiBmaWxsPSIjZTZmNmVlIi8+CjxwYXRoIGQ9Im0xMzAgODBjMTYuNTY5IDAgMzAgMTMuNDMxIDMwIDMwcy0xMy40MzEgMzAtMzAgMzAtMzAtMTMuNDMxLTMwLTMwIDEzLjQzMS0zMCAzMC0zMHptMCA1Yy0xMy44MDcgMC0yNSAxMS4xOTMtMjUgMjVzMTEuMTkzIDI1IDI1IDI1IDI1LTExLjE5MyAyNS0yNS0xMS4xOTMtMjUtMjUtMjV6bS02MCA4MHY0MmM0LjE5MyAwIDguMDE5IDEuNjg2IDEwLjg5NyA0LjY4NmwzOC4yMDctNDIuNjg2aC0zMS4xMDRjLTE0LjMzIDAtMjYtMTEuNjctMjYtMjZ2LTJ6bTEzMCAzOXYtMzljMC0xNC4zMy0xMS42Ny0yNi0yNi0yNmgtNDl2Mkg3NGMxNC4zMyAwIDI2IDExLjY3IDI2IDI2djM5aDUwdi0yeiIgZmlsbD0iIzIyOGI0OSIvPgo8L3N2Zz4K';
        this.alt = 'Imagen no disponible';
      };
      
      document.getElementById('producto-nombre').textContent = product.nombre;
      document.getElementById('producto-descripcion').textContent = product.descripcion || 'Sin descripci√≥n disponible.';
      
      // COPILOT: QUIERO CAMBIAR SOLO EL LAYOUT DEL DETALLE DE PRODUCTO.
      //
      // Objetivo: que esta p√°gina de detalle se parezca al ejemplo de Vis√£oVip
      // (producto grande a la izquierda y toda la info a la derecha), manteniendo
      // colores y estilo general de "Compras Posadas".
      
      // Llenar ficha t√©cnica
      document.getElementById('ficha-stock').textContent = `${product.stock || 0} unidades`;
      document.getElementById('ficha-codigo').textContent = product.id.substring(0, 8);
      document.getElementById('ficha-categoria').textContent = product.categorias ? product.categorias.nombre : 'Sin categor√≠a';
      document.getElementById('ficha-tienda').textContent = product.tiendas ? product.tiendas.nombre : 'Tienda';
      
      // Mostrar marca si existe
      if (product.marca || (product.categorias && product.categorias.nombre)) {
        document.getElementById('ficha-marca').textContent = product.marca || product.categorias.nombre;
        document.getElementById('ficha-marca-container').style.display = 'flex';
      }
      
      // Formatear precio principal
      const precioFormatted = new Intl.NumberFormat('es-AR', {
        style: 'currency',
        currency: 'ARS',
        minimumFractionDigits: 0,
        maximumFractionDigits: 0,
      }).format(product.precio_ars || product.precio || 0);
      
      document.getElementById('producto-precio-principal').textContent = precioFormatted;
      
      // Mostrar precio original si existe
      if (product.precio_ars_original && product.precio_ars_original > (product.precio_ars || product.precio)) {
        const precioOriginalFormatted = new Intl.NumberFormat('es-AR', {
          style: 'currency',
          currency: 'ARS',
          minimumFractionDigits: 0,
          maximumFractionDigits: 0,
        }).format(product.precio_ars_original);
        
        document.getElementById('producto-precio-original').textContent = precioOriginalFormatted;
        document.getElementById('producto-precio-original').style.display = 'block';
      }
      document.getElementById('producto-id').textContent = `ID: ${product.id.substring(0, 8)}`;
      document.getElementById('producto-stock').textContent = `Stock disponible: ${product.stock || 0} unidades`;
      document.getElementById('producto-descripcion').textContent = product.descripcion || 'Sin descripci√≥n disponible.';
      
      // Especificaciones t√©cnicas
      if (product.especificaciones && Object.keys(product.especificaciones).length > 0) {
        const specsList = document.getElementById('specs-list');
        const specsContainer = document.getElementById('producto-detalles');
        
        specsList.innerHTML = '';
        
        Object.entries(product.especificaciones).forEach(([key, value]) => {
          const li = document.createElement('li');
          li.textContent = `${key}: ${value}`;
          specsList.appendChild(li);
        });
        
        specsContainer.style.display = 'block';
      }
      
      // Actualizar t√≠tulo de la p√°gina
      document.title = `${product.nombre} - Compras Posadas`;
      
      // Configurar bot√≥n de favoritos
      const favBtn = document.getElementById('producto-fav-btn');
      if (favBtn) {
        favBtn.setAttribute('data-product-id', product.id);
        // Disparar evento para actualizar estado del bot√≥n
        setTimeout(() => {
          document.dispatchEvent(new CustomEvent('cards:rendered'));
        }, 100);
      }
    }

    // Inicializar cuando el DOM est√© listo
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üéÜ Iniciando carga de producto...');
      console.log('üîó URL actual:', window.location.href);
      console.log('üÜî ID del producto:', getProductIdFromURL());
      setTimeout(loadProduct, 300); // Peque√±o delay para asegurar que los scripts est√©n cargados
    });
  </script>

    </main>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer__wrap">
      ¬© 2025 Compras Posadas ‚Äî Hecho para comparar precios en Posadas, Misiones.
    </div>
  </footer>

  <!-- Barra de navegaci√≥n inferior (Bottom Navigation) -->
  <nav class="bottom-nav" aria-label="Navegaci√≥n principal">
    <div class="bottom-nav__container">
      <a href="index.html" class="bottom-nav__item" aria-label="Ir al inicio">
        <svg class="bottom-nav__icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="bottom-nav__label">Home</span>
      </a>
      
      <a href="tiendas.html" class="bottom-nav__item" aria-label="Ver tiendas">
        <svg class="bottom-nav__icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
          <path d="M23 21V19C23 18.1974 22.7205 17.4204 22.2207 16.8056C21.7209 16.1908 21.0332 15.7759 20.26 15.64" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M16 3.13C16.7739 3.26531 17.4622 3.68167 17.9629 4.29790C18.4636 4.91413 18.7436 5.69240 18.7436 6.49635C18.7436 7.30030 18.4636 8.07857 17.9629 8.69480C16.4622 9.31103 15.7739 9.72739 16 9.86270" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="bottom-nav__label">Tiendas</span>
      </a>
      
      <a href="ubicaciones.html" class="bottom-nav__item" aria-label="Ver ubicaciones">
        <svg class="bottom-nav__icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M21 10C21 17 12 23 12 23S3 17 3 10C3 7.61305 3.94821 5.32387 5.63604 3.63604C7.32387 1.94821 9.61305 1 12 1C14.3869 1 16.6761 1.94821 18.3639 3.63604C20.0518 5.32387 21 7.61305 21 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="2"/>
        </svg>
        <span class="bottom-nav__label">Ubicaciones</span>
      </a>
      
      <button class="bottom-nav__item bottom-nav__categories" aria-label="Abrir categor√≠as" aria-expanded="false">
        <svg class="bottom-nav__icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
          <line x1="3" y1="6" x2="21" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <line x1="3" y1="12" x2="21" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <line x1="3" y1="18" x2="21" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <span class="bottom-nav__label">Categor√≠as</span>
      </button>
    </div>
  </nav>

  <!-- Modal de Login -->
  <div id="loginModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="loginTitle" aria-hidden="true">
    <div class="modal__backdrop" data-close></div>
    <div class="modal__card">
      <header class="modal__header">
        <h2 id="loginTitle">Iniciar sesi√≥n</h2>
        <button class="modal__close" type="button" aria-label="Cerrar" data-close>√ó</button>
      </header>
      <form id="loginForm" class="modal__body" novalidate>
        <label>Email
          <input type="email" name="email" placeholder="tu@email.com" required />
        </label>
        <label>Contrase√±a
          <input type="password" name="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" minlength="6" required />
        </label>
        <button id="loginSubmit" class="btn btn-primary" type="submit">Ingresar</button>
        <div class="modal__links">
          <button type="button" class="link" id="forgotPass">¬øOlvidaste tu contrase√±a?</button>
          <button type="button" class="link" id="createAccount">Crear cuenta</button>
        </div>
        <div class="modal__oauth">
          <button type="button" class="btn btn-ghost" id="loginGoogle">Continuar con Google</button>
          <small class="hint">* Google se activar√° cuando conectemos Supabase</small>
        </div>
        <p id="loginError" class="form-error" role="alert" hidden></p>
      </form>
    </div>
  </div>

  <!-- Lista de deseos (Drawer) -->
  <aside id="wishlistDrawer" class="wl-drawer" aria-hidden="true" aria-label="Lista de deseos">
    <div class="wl-backdrop" data-close></div>
    <section class="wl-panel">
      <header class="wl-header">
        <h3>Lista de deseos</h3>
        <button class="wl-close" type="button" aria-label="Cerrar" data-close>√ó</button>
      </header>
      <div id="wlList" class="wl-list" role="list"></div>
      <footer class="wl-footer">
        <button id="wlClear" class="btn btn-ghost">Vaciar lista</button>
      </footer>
    </section>
  </aside>

  <!-- Supabase SDK -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  
  <!-- Scripts de la aplicaci√≥n -->
  <script src="assets/js/config/supabase.js"></script>
  <script src="assets/js/global-search.js"></script>
  <script src="assets/js/script.js"></script>
  
  <!-- Inicializaci√≥n del plugin AOS -->
  <script>
    // Inicializar AOS cuando el documento est√© listo
    document.addEventListener('DOMContentLoaded', function() {
      // Inicializar AOS
      AOS.init({
        duration: 600,    // Duraci√≥n por defecto de las animaciones
        easing: 'ease-in-out',  // Tipo de transici√≥n
        once: true,       // Las animaciones solo ocurren una vez
        offset: 50,       // Offset desde el trigger point
        delay: 0,         // Delay por defecto
      });
      
      // Refresh AOS cuando se redimensiona la ventana
      window.addEventListener('resize', function() {
        AOS.refresh();
      });
    });
  </script>
</body>
</html>